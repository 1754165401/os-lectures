\input{../preamble}

%----------------------------------------------------------------------------------------
%	TITLE PAGE
%----------------------------------------------------------------------------------------

\title[第2讲]{第2讲 ：操作系统与系统结构和程序设计语言} % The short title appears at the bottom of every slide, the full title is only on the title page
\subtitle{第四节：RISC-V CPU启动}
\author{向勇、陈渝、李国良} % Your name
\institute[清华大学] % Your institution as it will appear on the bottom of every slide, may be shorthand to save space
{
清华大学计算机系 \\ % Your institution for the title page
\medskip
\textit{xyong,yuchen,liguoliang@tsinghua.edu.cn} % Your email address
}
\date{\today} % Date, can be changed to a custom date

\begin{document}

\begin{frame}
\titlepage % Print the title page as the first slide
\end{frame}

%\begin{frame}
%\frametitle{提纲} % Table of contents slide, comment this block out to remove it
%\tableofcontents % Throughout your presentation, if you choose to use \section{} and \subsection{} commands, these will automatically be printed on this slide as an overview of your presentation
%\end{frame}

%----------------------------------------------------------------------------------------
%	PRESENTATION SLIDES
%----------------------------------------------------------------------------------------

%------------------------------------------------
%\section{第四节：RISC-V CPU启动}% Sections can be created in order to organize your presentation into discrete blocks, all sections and subsections are automatically printed in the table of contents as an overview of the talk
%------------------------------------------------

%\subsection{高级语言编译到机器指令} % A subsection can be created just before a set of slides with a common theme to further break down your presentation into chunks
%\subsection{理解stack}


%\begin{frame}
%	\frametitle{RISC-V CPU}
%	\framesubtitle{系统编程语言}

%\begin{figure}
%\centering
%\includegraphics[width=0.8\linewidth]{five-stage-rv}

%\caption{5级流水线RISC-V CPU}
%\end{figure}

%\end{frame}

\begin{frame}
	\frametitle{RISC-V CPU}
%	\framesubtitle{QEMU}
%\begin{figure}
	\centering
	\includegraphics[width=0.2\linewidth]{qemu}
	
%	\caption{QEMU for RISC-V CPU}
%\end{figure}	
	\begin{itemize}
		
		\item RISC-V
		\begin{itemize}
			\item CPU: RV64 ISA with MMU/TLB
			\item MEM: ROM, RAM，IO-MEM, etc
			\item I/O：Timer, UART
			\item Interrupt: PLIC(Platform-Level Interrupt Controller) -- Device
			\item Interrupt: CLINT(Core Local Interruptor) -- Timer, IPI 
		\end{itemize}

	\end{itemize}	
	
\end{frame}


\begin{frame}
	\frametitle{RISC-V CPU}
%	\framesubtitle{QEMU}
	\centering
	\includegraphics[width=0.2\linewidth]{qemu}	
	\begin{itemize}
		
		\item RISC-V CPU 启动过程
		\begin{itemize}
			\item 初始化CPU/Regs	
			\item 初始化内存
			\item 初始化基本外设
			\item 执行ROM中固化的代码
		\end{itemize}
		\item 出处： \href{https://github.com/qemu/qemu}{https://github.com/qemu/qemu}
		
	\end{itemize}	
	
\end{frame}


\begin{frame}[plain]
%	\frametitle{RISC-V CPU 启动过程--初始化CPU}
	%	\framesubtitle{QEMU}
	%	\centering
%	\includegraphics[width=0.1\linewidth]{qemu}	
%	\begin{itemize}
%		
%		\item RISC-V CPU 启动过程--初始化CPU
%		
%	\end{itemize}		
	\centering
	\includegraphics[width=0.65\linewidth]{qemu-initcpu}
\end{frame}

\begin{frame}
	\frametitle{RISC-V CPU}
	%	\framesubtitle{QEMU}
%	\centering
	\includegraphics[width=0.1\linewidth]{qemu}	
	\begin{itemize}
		
		\item RISC-V CPU 启动过程--初始化内存
		
	\end{itemize}	
	
	\centering
	\includegraphics[width=0.6\linewidth]{qemu-initmem}
\end{frame}

\begin{frame}[plain]
%	\frametitle{ RISC-V CPU 启动过程--初始化外设}
	%	\framesubtitle{QEMU}
	%	\centering
	%	\includegraphics[width=0.1\linewidth]{qemu}	
%	\begin{itemize}
%		
%		\item RISC-V CPU 启动过程--初始化外设
%		
%	\end{itemize}	
	\centering
	\includegraphics[width=0.8\textwidth]{qemu-initboard}
\end{frame}


\begin{frame}[plain]
	\frametitle{RISC-V CPU 启动过程--ROM初始化代码}
	%	\framesubtitle{QEMU}
	%	\centering
%	\includegraphics[width=0.1\linewidth]{qemu}	
%	\begin{itemize}
%		
%		\item RISC-V CPU 启动过程--ROM初始化代码
%		
%	\end{itemize}	
	
	\centering
	\includegraphics[width=0.8\linewidth]{qemu-resetcode}
\end{frame}


%----------------------------------------------------------------------------------------

\end{document}
