# 教学日历（教学大纲）（48学时）

大纲修定历史：

 * [v1](https://github.com/LearningOS/os-lectures/blob/c3933c913abdedbda15a25ad85e33f166fae38fc/os-course-outline.md)
 * [v2](https://github.com/LearningOS/os-lectures/blob/9ffa747971086b88f8045b04ae012c82ad837414/os-course-outline.md)：2020年10月21日提交给系里的版本；
 * [v3](https://github.com/LearningOS/os-lectures/blob/e00265613daeafffa9fa4d1a53def7b5ed92016a/os-course-outline.md): 21 Oct 2020
 * [v4](https://github.com/LearningOS/os-lectures/blob/1d07e4bfc55af586079499db65f926b52c0afeb1/os-course-outline.md): cooperate with 2021-spring labs
 * [v5](https://github.com/LearningOS/os-lectures/blob/f001a6c5bacc7be80e27a168959c288c91ec1639/os-course-outline.md): 2021年秋季学期结束时更新教学内容部分

## 课程组织与基本目的

操作系统是计算机系统中负责管理各种软硬件资源的核心系统软件，掌握操作系统的基本原理及其设计实现技术是研究型大学计算机专业本科毕业生的基本要求。

本课程是计算机专业核心课，从计算机系统的视角进行内容组织与调整，以教学操作系统uCore/rCore和risc-v CPU为实验环境，讲授操作系统的概念、基本原理和实现技术，并介绍部分当前操作系统研究热点和论文，帮助学生了解和掌握大型复杂系统软件的分析方法和核心设计思路，并为学生充分利用操作系统功能进行应用软件研究和开发打下扎实的基础。

下面的每一讲是两个课时

## 教学内容

## 第一部分 操作系统基础

### 第一讲 操作系统概述

#### 1.1 课程概述&教学安排
#### 1.2 什么是操作系统
#### 1.3 操作系统历史演变
#### 1.4 操作系统结构
#### 1.5 OS实验概述

###  第二讲 中断、异常与系统调用

#### 2.1 从OS角度看计算机系统
#### 2.2 从OS角度再理解RISC-V
#### 2.3 kernel mode操作系统

### 第三讲 进程与调度

#### 3.1 进程概念
#### 3.2 处理机调度
#### 3.3 进程控制
#### 3.4 同步互斥与进程间通信
#### 3.5 ch3：分时多任务系统

### 第四讲：存储管理

#### 4.1 计算机体系结构和内存层次
#### 4.2 内存分配
#### 4.3 页式存储管理
#### 4.4 虚拟存储
#### 4.5 文件系统
#### 4.6 RISC-V SV39页式存储
#### 4.7 ch6-文件系统

## 第二部分 内存管理

### 第五讲 物理内存管理：非连续内存分配

#### 5.1 连续内存分配
#### 5.2 SLAB 分配器
#### 5.3 非连续内存分配
#### 5.4 页表
#### 5.5 RISC-V 页映射机制

### 第六讲 虚拟存储概念

#### 6.1 局部性原理
#### 6.2 覆盖和交换
#### 6.3 虚拟页式存储
#### 6.4 RISC-V 缺页异常

### 第七讲 虚拟存储：局部页面置换算法

#### 7.1 页面置换算法的概念
#### 7.2 最优算法、先进先出算法和最近最久未使用算法
#### 7.3 时钟置换算法和最不常用算法
#### 7.4 Belady现象和局部置换算法比较
#### 7.5 页表自映射

### 第八讲 虚拟存储：全局页面置换算法

#### 8.1 全局页面置换算法
#### 8.2 工作集置换算法
#### 8.3 缺页率置换算法
#### 8.4 抖动和负载控制
#### 8.5 FBR:访问频率置换算法
#### 8.6 面向缓存的页替换算法 – LRU-K & 2Q
#### 8.7 面向缓存的页替换算法 – LIRS

## 第三部分 进程管理和调度

### 第九讲 进程、线程和协程

#### 9.1 进程（process）
#### 9.2 线程（thread）
#### 9.3 协程（coroutine）

### 第十讲 进程、线程和协程的实现

#### 10.1 进程的实现
#### 10.2 rCore进程管理
#### 10.3 用户线程的实现
#### 10.4 Rust语言协程的实现

### 第十一讲 单处理机调度

#### 11.1 处理机调度概念 
#### 11.2 调度准则 
#### 11.3 调度算法 
#### 11.4 实验调度框架 
#### 11.5 实时调度
#### 11.6 优先级反置



### 第十二讲 多处理器调度

#### 12.1 对称多处理与多核架构
#### 12.2 多处理器调度概述
#### 12.3 O(1) 调度
#### 12.4 CFS调度
#### 12.5 BFS调度算法

## 第四部分 进程间通信

### 第十三讲 同步互斥

#### 13.1 背景
#### 13.2 现实生活中的同步问题
#### 13.3 临界区
#### 13.4 禁用硬件中断
#### 13.5 基于软件的解决方法
#### 13.6 更高级的抽象方法

### 第十四讲 信号量与管程

#### 14.1 信号量
#### 14.2 信号量使用
#### 14.3 管程
#### 14.4 哲学家就餐问题
#### 14.5 读者-写者问题
#### 14.6 Rust语言中的同步机制

### 第十五讲 死锁和并发错误检测

#### 15.1 死锁概念
#### 15.2 死锁处理方法
#### 15.3 银行家算法
#### 15.4 死锁检测
#### 15.5 并发错误检测



### 第十六讲 进程通信

#### 16.1 进程通信概念
#### 16.2 信号
#### 16.3 管道
#### 16.4 消息队列和共享内存
#### 16.5 D-Bus机制
#### 16.6 Binder机制

## 第五部分 文件系统和I/O

### 第十七讲 文件系统概念

#### 17.1 文件系统和文件
#### 17.2 文件描述符
#### 17.3 目录及其他
#### 17.4 虚拟文件系统 VFS
#### 17.5 进程文件系统 procfs
#### 17.6 Using the Linux Tracing Infrastructure

### 第十八讲 文件系统实例(1)

#### 18.1 系统可靠性概述
#### 18.2 FAT文件系统
#### 18.3 EXT4文件系统

### 第十九讲:文件系统实例 (2) 

#### 19.1 NTFS
#### 19.2 Zettabyte File System (ZFS)
#### 19.3 数据库文件系统

### 第二十讲 I/O子系统

#### 20.1 设备接口
#### 20.2 设备执行模型
#### 20.3 磁盘子系统
#### 20.4 RISC-V Interrupts

## 第六部分 操作系统扩展

### 第二十一讲 分布式系统

#### 21.1 分布式系统概述
#### 21.2 分布式文件系统
#### 21.3 RDMA: Remote Direct Memory Access
#### 21.4 分布式软总线

### 第二十二讲 异步编程 (Asynchronous Programming)

#### 22.1 Background
#### 22.2 Futures in Rust
#### 22.3 Generators and async/await
#### 22.4 Self-Referential Structs & Pin
#### 22.5 Waker and Reactor

### 第二十三讲 Virtual Machine Monitor (Hypervisor)

#### 23.1 Overview
#### 23.2 How VMM works

### 期末考试

## 教学实验

### 实验0：操作系统实验环境和工具

- 实验目的：了解和熟悉操作系统实验的编译方法和流程、基于硬件模拟器的操作系统内核调试方法，复习Rust语言和RISC-V汇编语言。
- 实验内容：安装Linux操作系统、Rust编译工具和QEMU硬件模拟器，并熟悉这些系统和工具的使用方法。

### 实验1：hello-world OS

- 实验目的：了解：在裸机上的执行环境，让应用与硬件隔离，简化了应用访问硬件的难度和复杂性。
- 实验内容：直接与硬件交互的系统程序的编译运行、 输出字符的方法、调试系统程序的方法。

### 实验2：kernel-mode OS

- 实验目的：了解：操作系统利用硬件特权级机制，实现对操作系统自身的保护；应用在用户态通过系统调用得到内核态的内核服务；
  操作系统批处理机制支持多个程序的自动加载和运行。
- 实验内容：特权级机制、应用程序实现、批处理机制、特权级切换。

### 实验3：multi-programming OS

- 实验目的：了解：操作系统通过协作机制/抢占机制支持程序主动/被动放弃处理器，提高系统效率。
- 实验内容：多道程序的放置与加载、任务切换、协作式调度、抢占式调度。 

### 实验4：mem-isolation OS

- 实验目的：了解：操作系统通过动态内存分配机制、页表的虚实内存映射机制，加强内存安全，简化应用开发。
- 实验内容：动态内存分配、地址空间(Address Space)抽象、多级页表

### 实验5：multi-process OS

- 实验目的：了解：操作系统建立了进程创建、执行、切换和结束的动态管理过程。
- 实验内容：进程(Process)抽象、进程管理。

### 实验6：Inter-Process-Comm OS

- 实验目的：了解：操作系统通过进程间通信(Inter-Process-Comm)机制，让应用之间建立了有效的联系。
- 实验内容：进程间通信机制、管道(PIPE)机制。

### 实验7：File-System OS

- 实验目的：了解：操作系统通过文件系统完成对程序和数据的持久保存与灵活的访问。
- 实验内容：基于inode方式的文件系统的设计与实现。 

### 实验8：r/u Core OS

- 实验目的：了解：为支持更丰富的应用需求，操作系统需要改进与完善；通过完成一个完整的OS kernel的设计与实现，形成面向操作系统的系统思维。
- 实验内容：操作系统各组成部分关联关系的完善、操作系统各组成部分的改进与优化、对应用的进一步服务与支持。
