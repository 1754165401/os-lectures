---
marp: true
theme: default
paginate: true
_paginate: false
header: ''
footer: ''
backgroundColor: white
---

<!-- theme: gaia -->
<!-- _class: lead -->

# 第十讲 进程间通信
Inter Process Communication，IPC
## 第一节 进程间通信(IPC)概述

<br>
<br>

向勇 陈渝 李国良 

<br>
<br>

2022年春季



---
### IPC基本概念 -- 需求背景
目标：完成复杂应用需求
- 单个程序的功能有限
- 可通过多个程序的合作完成复杂的事情

定义：各进程之间通过数据交换进行交互的行为称为进程间通信（Inter-process communication，IPC）
![bg right:40% 100%](figs/ipcintro.png)


---
### IPC基本概念 -- 需求背景

进程可分为两类：
- 独立进程：这类进程与其它进程有交互
- 协作进程：两个或多个进程之间有交互
```
rCore-Tutorial-v3 on  ch7
❯ cat README.md | grep rcore
$ git clone https://github.com/rcore-os/rCore-Tutorial-v3.git
...
* [x] expand the fs image size generated by `rcore-fs-fuse` to 128MiB
```
`grep`进程依赖于`cat`进程。`cat` 产生输出，`grep`等待`cat`的输出作为自己的输入，并进行字符串匹配。


---
### IPC基本概念 -- 需求背景
进程间能共享或传递数据就算是进程间通信。

| IPC手段  |  含义  |
| ------------------------ | ---- |
|  共享内存（Shared Memory)    |  多个进程共享一块物理内存  |
| 文件（File）     |  多个进程可访问同一文件 |




---
### IPC基本概念 -- 需求背景
进程间能共享或传递数据就算是进程间通信。

| IPC手段  |  含义  |
| ------------------------ | ---- |
|   管道（Pipe）   | 单方向传输字节流  |
|   消息队列（Message Queue）   |  多个进程从队列中发送/接收消息 |
|  信号（Signal）    | 发送某些信号通知进程，进程异步收到信号并处理  |
|  套接字（Socket）    | 多/单机进程间网络通信  |


---
### IPC基本概念 -- 需求背景
进程间能共享或传递数据就算是进程间通信。
- 通信方式：直接通信   间接通信

![w:500](figs/ipcintro.png)


---
### IPC基本概念 -- 需求背景
进程间能共享或传递数据就算是进程间通信。
- 通信方式：阻塞（同步）或非阻塞（异步）
- 阻塞通信: 
  - 阻塞发送、阻塞接收
- 非阻塞通信
  - 非阻塞发送、非阻塞接收

![bg right:30% 100%](figs/ipcintro.png)




---
### IPC基本概念 -- 需求背景
进程间能共享或传递数据就算是进程间通信。
- 缓冲方式：
  - 0 容量: 发送方必须等待接收方
  - 有限容量：通信链路缓冲队列满时，发送方必须等待
  - 无限容量：发送方不需要等待






![bg right:30% 100%](figs/ipcintro.png)